#!/bin/bash

input=""
output=""

for input in ${1}/*.glade ; do
	if [[ "${name_file}" == "*.glade" ]]; then
		exit
	fi
	name_file="$(basename "${input}")"
	output="${1}/${name_file//./_}.h"
	def="$(basename ${output})"
	def="${def^^}"
	def="${def//./_}_"

	echo "Converting \"${name_file}\" to \"$(basename "${output}")\""

	echo "/* autogenerated file, do not modify! */" > "${output}"
	echo "/* souce file: ${name_file} */" >> "${output}"
	echo "#ifndef ${def}" >> "${output}"
	echo "#define ${def}" >> "${output}"
	echo "const gchar *${name_file//./_}=" >> "${output}" 
	sed -e 's/"/\\"/g' -e 's/.*/"&"/' "${input}" >> "${output}"
	echo ";" >> "${output}"
	echo "#endif /* ${def} */" >> "${output}"
done

