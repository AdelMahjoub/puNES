#!/bin/bash

input=""
output=""

for input in ${1}/*.glade ; do
	name_file="$(basename "${input}")"
	output="${1}/${name_file//./_}.h"

	echo "Converting \"${name_file}\" to \"$(basename "${output}")\""

	echo "/* autogenerated file, do not modify! */" > "${output}"
	echo "/* souce file: ${name_file} */" >> "${output}"
	echo "const gchar *${name_file//./_}=" >> "${output}" 
	sed -e 's/"/\\"/g' -e 's/.*/"&"/' "${input}" >> "${output}"
	echo ";" >> "${output}"
done

